{"ast":null,"code":"import _slicedToArray from\"/Users/sakshichoudhary/Desktop/Voice4Rural/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/sakshichoudhary/Desktop/Voice4Rural/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useReducer,useEffect}from\"react\";import axios from\"axios\";var ACTIONS={MAKE_REQUEST:\"make-request\",GET_DATA:\"get-data\",ERROR:\"error\",UPDATE_HAS_NEXT_PAGE:\"update-has-next-page\"};var BASE_URL=\"https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json\";function reducer(state,action){switch(action.type){case ACTIONS.MAKE_REQUEST:return{loading:true,jobs:[]};case ACTIONS.GET_DATA:return _objectSpread(_objectSpread({},state),{},{loading:false,jobs:action.payload.jobs});case ACTIONS.ERROR:return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload.error,jobs:[]});case ACTIONS.UPDATE_HAS_NEXT_PAGE:return _objectSpread(_objectSpread({},state),{},{hasNextPage:action.payload.hasNextPage});default:return state;}}export default function useFetchJobs(params,page){var _useReducer=useReducer(reducer,{jobs:[],loading:true}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var cancelToken1=axios.CancelToken.source();dispatch({type:ACTIONS.MAKE_REQUEST});axios.get(BASE_URL,{cancelToken:cancelToken1.token,params:_objectSpread({markdown:true,page:page},params)}).then(function(res){dispatch({type:ACTIONS.GET_DATA,payload:{jobs:res.data}});}).catch(function(e){if(axios.isCancel(e))return;dispatch({type:ACTIONS.ERROR,payload:{error:e}});});var cancelToken2=axios.CancelToken.source();axios.get(BASE_URL,{cancelToken:cancelToken2.token,params:_objectSpread({markdown:true,page:page+1},params)}).then(function(res){dispatch({type:ACTIONS.UPDATE_HAS_NEXT_PAGE,payload:{hasNextPage:res.data.length!==0}});}).catch(function(e){if(axios.isCancel(e))return;dispatch({type:ACTIONS.ERROR,payload:{error:e}});});return function(){cancelToken1.cancel();cancelToken2.cancel();};},[params,page]);return state;}","map":{"version":3,"sources":["/Users/sakshichoudhary/Desktop/Voice4Rural/client/src/Components/Jobs/useFetchJobs.js"],"names":["useReducer","useEffect","axios","ACTIONS","MAKE_REQUEST","GET_DATA","ERROR","UPDATE_HAS_NEXT_PAGE","BASE_URL","reducer","state","action","type","loading","jobs","payload","error","hasNextPage","useFetchJobs","params","page","dispatch","cancelToken1","CancelToken","source","get","cancelToken","token","markdown","then","res","data","catch","e","isCancel","cancelToken2","length","cancel"],"mappings":"+UAAA,OAASA,UAAT,CAAqBC,SAArB,KAAsC,OAAtC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,OAAO,CAAG,CACdC,YAAY,CAAE,cADA,CAEdC,QAAQ,CAAE,UAFI,CAGdC,KAAK,CAAE,OAHO,CAIdC,oBAAoB,CAAE,sBAJR,CAAhB,CAOA,GAAMC,CAAAA,QAAQ,CACZ,4EADF,CAGA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwBC,MAAxB,CAAgC,CAC9B,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKT,CAAAA,OAAO,CAACC,YAAb,CACE,MAAO,CAAES,OAAO,CAAE,IAAX,CAAiBC,IAAI,CAAE,EAAvB,CAAP,CACF,IAAKX,CAAAA,OAAO,CAACE,QAAb,CACE,sCAAYK,KAAZ,MAAmBG,OAAO,CAAE,KAA5B,CAAmCC,IAAI,CAAEH,MAAM,CAACI,OAAP,CAAeD,IAAxD,GACF,IAAKX,CAAAA,OAAO,CAACG,KAAb,CACE,sCACKI,KADL,MAEEG,OAAO,CAAE,KAFX,CAGEG,KAAK,CAAEL,MAAM,CAACI,OAAP,CAAeC,KAHxB,CAIEF,IAAI,CAAE,EAJR,GAMF,IAAKX,CAAAA,OAAO,CAACI,oBAAb,CACE,sCAAYG,KAAZ,MAAmBO,WAAW,CAAEN,MAAM,CAACI,OAAP,CAAeE,WAA/C,GACF,QACE,MAAOP,CAAAA,KAAP,CAfJ,CAiBD,CAED,cAAe,SAASQ,CAAAA,YAAT,CAAsBC,MAAtB,CAA8BC,IAA9B,CAAoC,iBACvBpB,UAAU,CAACS,OAAD,CAAU,CAAEK,IAAI,CAAE,EAAR,CAAYD,OAAO,CAAE,IAArB,CAAV,CADa,4CAC1CH,KAD0C,iBACnCW,QADmC,iBAGjDpB,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,YAAY,CAAGpB,KAAK,CAACqB,WAAN,CAAkBC,MAAlB,EAArB,CACAH,QAAQ,CAAC,CAAET,IAAI,CAAET,OAAO,CAACC,YAAhB,CAAD,CAAR,CACAF,KAAK,CACFuB,GADH,CACOjB,QADP,CACiB,CACbkB,WAAW,CAAEJ,YAAY,CAACK,KADb,CAEbR,MAAM,gBAAIS,QAAQ,CAAE,IAAd,CAAoBR,IAAI,CAAEA,IAA1B,EAAmCD,MAAnC,CAFO,CADjB,EAKGU,IALH,CAKQ,SAACC,GAAD,CAAS,CACbT,QAAQ,CAAC,CAAET,IAAI,CAAET,OAAO,CAACE,QAAhB,CAA0BU,OAAO,CAAE,CAAED,IAAI,CAAEgB,GAAG,CAACC,IAAZ,CAAnC,CAAD,CAAR,CACD,CAPH,EAQGC,KARH,CAQS,SAACC,CAAD,CAAO,CACZ,GAAI/B,KAAK,CAACgC,QAAN,CAAeD,CAAf,CAAJ,CAAuB,OACvBZ,QAAQ,CAAC,CAAET,IAAI,CAAET,OAAO,CAACG,KAAhB,CAAuBS,OAAO,CAAE,CAAEC,KAAK,CAAEiB,CAAT,CAAhC,CAAD,CAAR,CACD,CAXH,EAaA,GAAME,CAAAA,YAAY,CAAGjC,KAAK,CAACqB,WAAN,CAAkBC,MAAlB,EAArB,CACAtB,KAAK,CACFuB,GADH,CACOjB,QADP,CACiB,CACbkB,WAAW,CAAES,YAAY,CAACR,KADb,CAEbR,MAAM,gBAAIS,QAAQ,CAAE,IAAd,CAAoBR,IAAI,CAAEA,IAAI,CAAG,CAAjC,EAAuCD,MAAvC,CAFO,CADjB,EAKGU,IALH,CAKQ,SAACC,GAAD,CAAS,CACbT,QAAQ,CAAC,CACPT,IAAI,CAAET,OAAO,CAACI,oBADP,CAEPQ,OAAO,CAAE,CAAEE,WAAW,CAAEa,GAAG,CAACC,IAAJ,CAASK,MAAT,GAAoB,CAAnC,CAFF,CAAD,CAAR,CAID,CAVH,EAWGJ,KAXH,CAWS,SAACC,CAAD,CAAO,CACZ,GAAI/B,KAAK,CAACgC,QAAN,CAAeD,CAAf,CAAJ,CAAuB,OACvBZ,QAAQ,CAAC,CAAET,IAAI,CAAET,OAAO,CAACG,KAAhB,CAAuBS,OAAO,CAAE,CAAEC,KAAK,CAAEiB,CAAT,CAAhC,CAAD,CAAR,CACD,CAdH,EAgBA,MAAO,WAAM,CACXX,YAAY,CAACe,MAAb,GACAF,YAAY,CAACE,MAAb,GACD,CAHD,CAID,CArCQ,CAqCN,CAAClB,MAAD,CAASC,IAAT,CArCM,CAAT,CAuCA,MAAOV,CAAAA,KAAP,CACD","sourcesContent":["import { useReducer, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst ACTIONS = {\n  MAKE_REQUEST: \"make-request\",\n  GET_DATA: \"get-data\",\n  ERROR: \"error\",\n  UPDATE_HAS_NEXT_PAGE: \"update-has-next-page\",\n};\n\nconst BASE_URL =\n  \"https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case ACTIONS.MAKE_REQUEST:\n      return { loading: true, jobs: [] };\n    case ACTIONS.GET_DATA:\n      return { ...state, loading: false, jobs: action.payload.jobs };\n    case ACTIONS.ERROR:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.error,\n        jobs: [],\n      };\n    case ACTIONS.UPDATE_HAS_NEXT_PAGE:\n      return { ...state, hasNextPage: action.payload.hasNextPage };\n    default:\n      return state;\n  }\n}\n\nexport default function useFetchJobs(params, page) {\n  const [state, dispatch] = useReducer(reducer, { jobs: [], loading: true });\n\n  useEffect(() => {\n    const cancelToken1 = axios.CancelToken.source();\n    dispatch({ type: ACTIONS.MAKE_REQUEST });\n    axios\n      .get(BASE_URL, {\n        cancelToken: cancelToken1.token,\n        params: { markdown: true, page: page, ...params },\n      })\n      .then((res) => {\n        dispatch({ type: ACTIONS.GET_DATA, payload: { jobs: res.data } });\n      })\n      .catch((e) => {\n        if (axios.isCancel(e)) return;\n        dispatch({ type: ACTIONS.ERROR, payload: { error: e } });\n      });\n\n    const cancelToken2 = axios.CancelToken.source();\n    axios\n      .get(BASE_URL, {\n        cancelToken: cancelToken2.token,\n        params: { markdown: true, page: page + 1, ...params },\n      })\n      .then((res) => {\n        dispatch({\n          type: ACTIONS.UPDATE_HAS_NEXT_PAGE,\n          payload: { hasNextPage: res.data.length !== 0 },\n        });\n      })\n      .catch((e) => {\n        if (axios.isCancel(e)) return;\n        dispatch({ type: ACTIONS.ERROR, payload: { error: e } });\n      });\n\n    return () => {\n      cancelToken1.cancel();\n      cancelToken2.cancel();\n    };\n  }, [params, page]);\n\n  return state;\n}\n"]},"metadata":{},"sourceType":"module"}